<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kissan Vani | Digital Saathi</title>
    <link rel="stylesheet" href="../css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
</head>
<body>

    <div class="app-container">
        <header>
            <h1>üåæ Kisan Vani</h1>
            <p id="appSubTitle">Your AI Agriculture Expert</p>
            <a href="dashboard.html" onclick="logout()" class="logout-btn" id="logoutBtn">Logout</a>
        </header>

        <div class="lang-switch">
            <label for="language" id="langLabel">Choose Language / ‡§≠‡§æ‡§∑‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç:</label>
            <select id="language">
                <option value="en-IN">English</option>
                <option value="hi-IN">Hindi (‡§π‡§ø‡§Ç‡§¶‡•Ä)</option>
                <option value="or-IN">Odia (‡¨ì‡¨°‡¨º‡¨ø‡¨Ü)</option>
            </select>
        </div>

        <div class="chat-box" id="chat-box">
        </div>

        <p id="status-text">Tap the mic to ask a question</p>

        <div class="mic-container">
            
            <div class="mic-group">
                <button id="mic-btn">
                    <span id="mic-icon">üéôÔ∏è</span>
                </button>
                <div class="pulse-ring"></div>
            </div>

            <input type="file" id="imageInput" accept="image/*" class="hidden">

            <button id="camera-btn" onclick="document.getElementById('imageInput').click()">
                üì∑
            </button>

            <div id="imagePreviewContainer" class="hidden">
                <img id="imagePreview" src="" alt="Crop Preview">
                <button id="clearBtn" onclick="clearImage()">‚úñ</button>
            </div>

        </div>
    </div>

    <script>
        const indexTranslations = {
            "en-IN": {
                appSubTitle: "Your AI Agriculture Expert",
                logoutBtn: "Logout",
                langLabel: "Choose Language / ‡§≠‡§æ‡§∑‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç:",
                statusText: "Tap the mic to ask a question"
            },
            "hi-IN": {
                appSubTitle: "‡§Ü‡§™‡§ï‡§æ ‡§è‡§Ü‡§à ‡§ï‡•É‡§∑‡§ø ‡§µ‡§ø‡§∂‡•á‡§∑‡§ú‡•ç‡§û",
                logoutBtn: "‡§≤‡•â‡§ó‡§Ü‡§â‡§ü",
                langLabel: "‡§≠‡§æ‡§∑‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç:",
                statusText: "‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§™‡•Ç‡§õ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Æ‡§æ‡§á‡§ï ‡§™‡§∞ ‡§ü‡•à‡§™ ‡§ï‡§∞‡•á‡§Ç"
            },
            "or-IN": {
                appSubTitle: "‡¨Ü‡¨™‡¨£‡¨ô‡≠ç‡¨ï‡¨∞ AI ‡¨ï‡≠É‡¨∑‡¨ø ‡¨¨‡¨ø‡¨∂‡≠á‡¨∑‡¨ú‡≠ç‡¨û",
                logoutBtn: "‡¨≤‡¨ó‡¨Ü‡¨â‡¨ü‡≠ç",
                langLabel: "‡¨≠‡¨æ‡¨∑‡¨æ ‡¨¨‡¨æ‡¨õ‡¨®‡≠ç‡¨§‡≠Å:",
                statusText: "‡¨™‡≠ç‡¨∞‡¨∂‡≠ç‡¨® ‡¨™‡¨ö‡¨æ‡¨∞‡¨ø‡¨¨‡¨æ‡¨ï‡≠Å ‡¨Æ‡¨æ‡¨á‡¨ï‡≠ç ‡¨ü‡≠ç‡≠ü‡¨æ‡¨™‡≠ç ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å"
            }
        };

        const appLangSelect = document.getElementById('language');

        function applyIndexTranslation(lang) {
            const t = indexTranslations[lang];
            if (!t) return;
            
            document.getElementById('appSubTitle').innerText = t.appSubTitle;
            document.getElementById('logoutBtn').innerText = t.logoutBtn;
            document.getElementById('langLabel').innerText = t.langLabel;
            
            const statusEl = document.getElementById('status-text');
            if (statusEl.innerText.includes('Tap') || statusEl.innerText.includes('‡§ü‡•à‡§™') || statusEl.innerText.includes('‡¨ü‡≠ç‡≠ü‡¨æ‡¨™‡≠ç')) {
                statusEl.innerText = t.statusText;
            }
        }

        appLangSelect.addEventListener('change', (e) => {
            const lang = e.target.value;
            localStorage.setItem('kisanGlobalLang', lang);
            applyIndexTranslation(lang);
        });

        window.addEventListener('DOMContentLoaded', () => {
            const savedLang = localStorage.getItem('kisanGlobalLang');
            if (savedLang) {
                appLangSelect.value = savedLang;
                applyIndexTranslation(savedLang);
            }
        });
    </script>
    
    <script src="../js/script.js"></script>

</body>
</html>